<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Primary SEO -->
    <title>Time To Travel To | Best Destinations by Month & Season</title>
    <meta
      name="description"
      content="Discover the best places to visit around the world by month and season. Find your perfect travel destination in January, summer, winter, or any time of year with TimeToTravelTo."
    />
    <meta
      name="keywords"
      content="travel destinations, best time to travel, where to travel, best places to visit, travel by month, travel calendar, vacation planner, global destinations, seasonal travel"
    />

    <!-- Open Graph for social sharing -->
    <meta
      property="og:title"
      content="Time To Travel To | Best Destinations by Month & Season"
    />
    <meta
      property="og:description"
      content="Plan your trips smarter. Find the best destinations to visit worldwide at the right time of the year."
    />
    <meta property="og:url" content="http://timetotravelto.online/" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="http://timetotravelto.online/logo.png" />
    <!-- Replace with actual image -->

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Time To Travel To | Best Destinations by Month & Season"
    />
    <meta
      name="twitter:description"
      content="Explore the world month by month â€“ find out where to travel in January, summer, or winter."
    />
    <meta
      name="twitter:image"
      content="http://timetotravelto.online/logo.png"
    />

    <!-- Canonical URL -->
    <link rel="canonical" href="http://timetotravelto.online/" />

    <!-- Favicon -->
    <link rel="icon" href="./favicon.ico" type="image/x-icon" />
    <script>
      // Tailwind CDN config: enable dark mode via class
      window.tailwind = window.tailwind || {};
      window.tailwind.config = { darkMode: "class" };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body
    class="bg-slate-50 text-slate-800 antialiased dark:bg-slate-900 dark:text-slate-100 transition-colors"
  >
    <div class="max-w-5xl mx-auto p-4 sm:p-6">
      <div class="flex items-center justify-end mb-3">
        <button
          id="themeToggle"
          class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full border text-sm hover:bg-slate-100 dark:hover:bg-slate-800 transition"
        >
          <span>ðŸŒ“</span>
          <span class="hidden sm:inline">Toggle Theme</span>
        </button>
      </div>
      <!-- Hero -->
      <header class="mb-6 relative overflow-hidden rounded-2xl">
        <div
          class="absolute inset-0 bg-gradient-to-r from-sky-500 via-indigo-500 to-emerald-500 opacity-20 blur-2xl"
        ></div>
        <div
          class="relative rounded-2xl border bg-white/70 backdrop-blur dark:bg-slate-800/60 p-6"
        >
          <div
            class="flex flex-col sm:flex-row items-center justify-center gap-4 sm:gap-6 mb-2 text-center sm:text-left"
          >
            <img
              src="./logo-basic.png"
              alt="Time To Travel To"
              class="h-20 sm:h-24 md:h-40"
            />
            <div>
              <h1 class="text-2xl md:text-3xl font-extrabold">
                Travel Month & Place Suggestor
              </h1>
              <p class="text-slate-600 dark:text-slate-300 mt-2">
                Enter a month or a country, optionally exclude some countries
                and set a budget range. Suggestions update live as you type.
              </p>
            </div>
          </div>
        </div>
      </header>

      <main class="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6">
        <section
          class="col-span-1 lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-2xl shadow border dark:border-slate-700"
        >
          <h2 class="font-semibold mb-3">Search</h2>

          <div class="space-y-4">
            <div>
              <label class="block text-sm text-slate-600"
                >Search by month</label
              >
              <select
                id="monthSelect"
                class="mt-1 w-full rounded-md border p-2 bg-white dark:bg-slate-900 dark:border-slate-700"
              >
                <option value="">-- select month --</option>
              </select>
              <small class="text-xs text-slate-500"
                >Pick a month to find recommended countries.</small
              >
            </div>

            <div>
              <label class="block text-sm text-slate-600"
                >Or search by country name</label
              >
              <div class="relative">
                <span
                  class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"
                  >ðŸ”Ž</span
                >
                <input
                  id="countryInput"
                  type="text"
                  placeholder="e.g. France"
                  class="pl-9 mt-1 w-full rounded-md border p-2 bg-white dark:bg-slate-900 dark:border-slate-700"
                />
              </div>
              <small class="text-xs text-slate-500"
                >Type (partial is fine). If left empty, month filter is
                used.</small
              >
            </div>

            <div>
              <label class="block text-sm text-slate-600"
                >Exclude countries (comma-separated)</label
              >
              <div class="relative">
                <span
                  class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"
                  >ðŸš«</span
                >
                <input
                  id="excludeInput"
                  type="text"
                  placeholder="e.g. USA, Brazil"
                  class="pl-9 mt-1 w-full rounded-md border p-2 bg-white dark:bg-slate-900 dark:border-slate-700"
                />
              </div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
              <div>
                <label class="block text-sm text-slate-600"
                  >Min budget (USD)</label
                >
                <div class="relative">
                  <span
                    class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"
                    >$</span
                  >
                  <input
                    id="minBudget"
                    type="number"
                    min="0"
                    placeholder="e.g. 500"
                    class="pl-7 mt-1 w-full rounded-md border p-2 bg-white dark:bg-slate-900 dark:border-slate-700"
                  />
                </div>
              </div>
              <div>
                <label class="block text-sm text-slate-600"
                  >Max budget (USD)</label
                >
                <div class="relative">
                  <span
                    class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"
                    >$</span
                  >
                  <input
                    id="maxBudget"
                    type="number"
                    min="0"
                    placeholder="e.g. 3000"
                    class="pl-7 mt-1 w-full rounded-md border p-2 bg-white dark:bg-slate-900 dark:border-slate-700"
                  />
                </div>
              </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-3">
              <button
                id="searchBtn"
                class="w-full sm:w-auto px-4 py-2 bg-sky-600 hover:bg-sky-700 text-white rounded-lg shadow-sm transition"
              >
                Search
              </button>
              <button
                id="clearBtn"
                class="w-full sm:w-auto px-4 py-2 border rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition"
              >
                Clear
              </button>
              <button
                id="randomBtn"
                class="w-full sm:w-auto sm:ml-auto px-4 py-2 bg-emerald-500 hover:bg-emerald-600 text-white rounded-lg shadow-sm transition"
              >
                Surprise me
              </button>
            </div>
          </div>
        </section>

        <aside
          class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow border dark:border-slate-700"
        >
          <h3 class="font-semibold mb-3">Filters summary</h3>
          <div id="summary" class="text-sm text-slate-700 space-y-2">
            <div>Month: <span id="summaryMonth">â€”</span></div>
            <div>Country search: <span id="summaryCountry">â€”</span></div>
            <div>Excluded: <span id="summaryExcluded">â€”</span></div>
            <div>Budget: <span id="summaryBudget">â€”</span></div>
          </div>

          <div class="mt-6">
            <h4 class="font-medium">Top suggestion</h4>
            <div
              id="topSuggestion"
              class="mt-3 p-3 rounded-lg bg-slate-50 dark:bg-slate-700/50 text-sm border dark:border-slate-600"
            >
              No suggestion yet.
            </div>
          </div>
        </aside>

        <section
          class="col-span-3 bg-white dark:bg-slate-800 p-6 rounded-2xl shadow border dark:border-slate-700"
        >
          <div
            class="flex flex-col sm:flex-row items-start sm:items-center gap-3 justify-between mb-3"
          >
            <h2 class="font-semibold">
              Results
              <span id="resultsCount" class="text-slate-500 text-sm">0</span>
            </h2>
            <label
              class="text-sm text-slate-600 dark:text-slate-300 flex items-center gap-2"
            >
              Sort by
              <select
                id="sortSelect"
                class="rounded-md border p-2 text-sm bg-white dark:bg-slate-900 dark:border-slate-700"
              >
                <option value="relevance">Relevance</option>
                <option value="minAsc">Budget (min â†‘)</option>
                <option value="minDesc">Budget (min â†“)</option>
              </select>
            </label>
          </div>
          <div
            id="results"
            class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"
          ></div>
        </section>
      </main>
    </div>

    <script>
      // Sample dataset. For production replace with API or a larger dataset.
      const data = [
        // Existing 15
        {
          name: "Japan",
          emoji: "ðŸ‡¯ðŸ‡µ",
          bestMonths: [3, 4, 11],
          minBudget: 70,
          maxBudget: 250,
          notes: "Cherry blossom & autumn colors.",
        },
        {
          name: "Thailand",
          emoji: "ðŸ‡¹ðŸ‡­",
          bestMonths: [11, 12, 1, 2],
          minBudget: 30,
          maxBudget: 120,
          notes: "Dry season beaches.",
        },
        {
          name: "France",
          emoji: "ðŸ‡«ðŸ‡·",
          bestMonths: [5, 6, 9],
          minBudget: 80,
          maxBudget: 300,
          notes: "Spring/early autumn pleasant.",
        },
        {
          name: "Italy",
          emoji: "ðŸ‡®ðŸ‡¹",
          bestMonths: [5, 6, 9, 10],
          minBudget: 75,
          maxBudget: 280,
          notes: "Avoid peak August.",
        },
        {
          name: "Australia",
          emoji: "ðŸ‡¦ðŸ‡º",
          bestMonths: [9, 10, 11, 12],
          minBudget: 90,
          maxBudget: 320,
          notes: "Spring/Summer in south.",
        },
        {
          name: "New Zealand",
          emoji: "ðŸ‡³ðŸ‡¿",
          bestMonths: [12, 1, 2, 3],
          minBudget: 100,
          maxBudget: 350,
          notes: "Summer Dec-Feb.",
        },
        {
          name: "USA",
          emoji: "ðŸ‡ºðŸ‡¸",
          bestMonths: [5, 6, 9, 10],
          minBudget: 70,
          maxBudget: 400,
          notes: "Varied by region.",
        },
        {
          name: "Canada",
          emoji: "ðŸ‡¨ðŸ‡¦",
          bestMonths: [6, 7, 8, 9],
          minBudget: 70,
          maxBudget: 300,
          notes: "Summer best.",
        },
        {
          name: "Egypt",
          emoji: "ðŸ‡ªðŸ‡¬",
          bestMonths: [10, 11, 2, 3],
          minBudget: 40,
          maxBudget: 150,
          notes: "Cooler months better.",
        },
        {
          name: "UAE",
          emoji: "ðŸ‡¦ðŸ‡ª",
          bestMonths: [11, 12, 1, 2],
          minBudget: 60,
          maxBudget: 250,
          notes: "Mild winter.",
        },
        {
          name: "Brazil",
          emoji: "ðŸ‡§ðŸ‡·",
          bestMonths: [5, 6, 7, 8],
          minBudget: 50,
          maxBudget: 220,
          notes: "Dry season.",
        },
        {
          name: "Spain",
          emoji: "ðŸ‡ªðŸ‡¸",
          bestMonths: [5, 6, 9, 10],
          minBudget: 60,
          maxBudget: 250,
          notes: "Spring/autumn great.",
        },
        {
          name: "Germany",
          emoji: "ðŸ‡©ðŸ‡ª",
          bestMonths: [5, 6, 9],
          minBudget: 65,
          maxBudget: 260,
          notes: "Shoulder seasons.",
        },
        {
          name: "Turkey",
          emoji: "ðŸ‡¹ðŸ‡·",
          bestMonths: [4, 5, 9, 10],
          minBudget: 50,
          maxBudget: 200,
          notes: "Spring/autumn touring.",
        },
        {
          name: "Indonesia",
          emoji: "ðŸ‡®ðŸ‡©",
          bestMonths: [5, 6, 7, 8],
          minBudget: 30,
          maxBudget: 150,
          notes: "Dry season, low cost.",
        },

        // Additional 35 (with Pakistan inserted near India)
        {
          name: "Vietnam",
          emoji: "ðŸ‡»ðŸ‡³",
          bestMonths: [9, 10, 11],
          minBudget: 30,
          maxBudget: 100,
          notes: "Affordable & scenic.",
        },
        {
          name: "Laos",
          emoji: "ðŸ‡±ðŸ‡¦",
          bestMonths: [11, 12, 1, 2],
          minBudget: 25,
          maxBudget: 80,
          notes: "Cheapest country to travel.",
        },
        {
          name: "Cambodia",
          emoji: "ðŸ‡°ðŸ‡­",
          bestMonths: [11, 12, 1, 2],
          minBudget: 30,
          maxBudget: 90,
          notes: "Angkor temples & low cost.",
        },
        {
          name: "India",
          emoji: "ðŸ‡®ðŸ‡³",
          bestMonths: [10, 11, 2, 3],
          minBudget: 25,
          maxBudget: 120,
          notes: "Diverse & budget options.",
        },
        {
          name: "Pakistan",
          emoji: "ðŸ‡µðŸ‡°",
          bestMonths: [4, 5, 9, 10],
          minBudget: 25,
          maxBudget: 90,
          notes: "Himalayan treks & cultural heritage, very budget-friendly.",
        },
        {
          name: "Nepal",
          emoji: "ðŸ‡³ðŸ‡µ",
          bestMonths: [10, 11, 3, 4],
          minBudget: 30,
          maxBudget: 90,
          notes: "Trekking paradise.",
        },
        {
          name: "Malaysia",
          emoji: "ðŸ‡²ðŸ‡¾",
          bestMonths: [5, 6, 9, 10],
          minBudget: 30,
          maxBudget: 100,
          notes: "Tropical & affordable.",
        },
        {
          name: "Philippines",
          emoji: "ðŸ‡µðŸ‡­",
          bestMonths: [12, 1, 2, 3],
          minBudget: 35,
          maxBudget: 120,
          notes: "Islands & low cost.",
        },
        {
          name: "China",
          emoji: "ðŸ‡¨ðŸ‡³",
          bestMonths: [4, 5, 9, 10],
          minBudget: 45,
          maxBudget: 120,
          notes: "Spring/fall ideal.",
        },
        {
          name: "South Korea",
          emoji: "ðŸ‡°ðŸ‡·",
          bestMonths: [4, 5, 9, 10],
          minBudget: 50,
          maxBudget: 150,
          notes: "Cherry blossoms & autumn.",
        },
        {
          name: "Singapore",
          emoji: "ðŸ‡¸ðŸ‡¬",
          bestMonths: [2, 7, 8],
          minBudget: 50,
          maxBudget: 180,
          notes: "Urban city-state.",
        },
        {
          name: "Sri Lanka",
          emoji: "ðŸ‡±ðŸ‡°",
          bestMonths: [1, 2, 3],
          minBudget: 25,
          maxBudget: 90,
          notes: "Beautiful beaches & tea.",
        },
        {
          name: "Greece",
          emoji: "ðŸ‡¬ðŸ‡·",
          bestMonths: [5, 6, 9],
          minBudget: 50,
          maxBudget: 200,
          notes: "Islands & culture.",
        },
        {
          name: "Portugal",
          emoji: "ðŸ‡µðŸ‡¹",
          bestMonths: [5, 6, 9, 10],
          minBudget: 45,
          maxBudget: 150,
          notes: "Affordable Europe stop.",
        },
        {
          name: "Croatia",
          emoji: "ðŸ‡­ðŸ‡·",
          bestMonths: [5, 6, 9],
          minBudget: 40,
          maxBudget: 180,
          notes: "Coast & history.",
        },
        {
          name: "Hungary",
          emoji: "ðŸ‡­ðŸ‡º",
          bestMonths: [5, 6, 9],
          minBudget: 35,
          maxBudget: 130,
          notes: "Budapest & value.",
        },
        {
          name: "Poland",
          emoji: "ðŸ‡µðŸ‡±",
          bestMonths: [5, 6, 9],
          minBudget: 35,
          maxBudget: 130,
          notes: "Cities & culture.",
        },
        {
          name: "Czech Republic",
          emoji: "ðŸ‡¨ðŸ‡¿",
          bestMonths: [5, 6, 9],
          minBudget: 35,
          maxBudget: 140,
          notes: "Prague & charm.",
        },
        {
          name: "Austria",
          emoji: "ðŸ‡¦ðŸ‡¹",
          bestMonths: [5, 6, 9],
          minBudget: 45,
          maxBudget: 160,
          notes: "Alps & classical vibes.",
        },
        {
          name: "Switzerland",
          emoji: "ðŸ‡¨ðŸ‡­",
          bestMonths: [6, 7, 8],
          minBudget: 80,
          maxBudget: 300,
          notes: "Scenic but pricey.",
        },
        {
          name: "Norway",
          emoji: "ðŸ‡³ðŸ‡´",
          bestMonths: [6, 7, 8],
          minBudget: 90,
          maxBudget: 320,
          notes: "Midnight sun & fjords.",
        },
        {
          name: "South Africa",
          emoji: "ðŸ‡¿ðŸ‡¦",
          bestMonths: [9, 10, 11],
          minBudget: 50,
          maxBudget: 180,
          notes: "Safaris & value.",
        },
        {
          name: "Kenya",
          emoji: "ðŸ‡°ðŸ‡ª",
          bestMonths: [6, 7, 8],
          minBudget: 50,
          maxBudget: 180,
          notes: "Safari season.",
        },
        {
          name: "Morocco",
          emoji: "ðŸ‡²ðŸ‡¦",
          bestMonths: [4, 5, 9, 10],
          minBudget: 40,
          maxBudget: 150,
          notes: "Culture & affordability.",
        },
        {
          name: "Mexico",
          emoji: "ðŸ‡²ðŸ‡½",
          bestMonths: [11, 12, 2, 3],
          minBudget: 45,
          maxBudget: 150,
          notes: "Beaches & culture.",
        },
        {
          name: "Peru",
          emoji: "ðŸ‡µðŸ‡ª",
          bestMonths: [5, 6, 9],
          minBudget: 40,
          maxBudget: 140,
          notes: "Machu Picchu & Andes.",
        },
        {
          name: "Argentina",
          emoji: "ðŸ‡¦ðŸ‡·",
          bestMonths: [9, 10, 11],
          minBudget: 45,
          maxBudget: 160,
          notes: "Southern Hemisphere spring.",
        },
        {
          name: "Chile",
          emoji: "ðŸ‡¨ðŸ‡±",
          bestMonths: [10, 11, 12],
          minBudget: 50,
          maxBudget: 170,
          notes: "Patagonia season.",
        },
        {
          name: "Colombia",
          emoji: "ðŸ‡¨ðŸ‡´",
          bestMonths: [12, 1, 2],
          minBudget: 40,
          maxBudget: 140,
          notes: "Caribbean coast & culture.",
        },
        {
          name: "Ecuador",
          emoji: "ðŸ‡ªðŸ‡¨",
          bestMonths: [6, 7, 8],
          minBudget: 40,
          maxBudget: 140,
          notes: "GalÃ¡pagos & Andes.",
        },
        {
          name: "Bolivia",
          emoji: "ðŸ‡§ðŸ‡´",
          bestMonths: [5, 6, 9],
          minBudget: 35,
          maxBudget: 120,
          notes: "Altiplano & Andes.",
        },
      ];

      const monthSelect = document.getElementById("monthSelect");
      const countryInput = document.getElementById("countryInput");
      const excludeInput = document.getElementById("excludeInput");
      const minBudget = document.getElementById("minBudget");
      const maxBudget = document.getElementById("maxBudget");
      const searchBtn = document.getElementById("searchBtn");
      const clearBtn = document.getElementById("clearBtn");
      const randomBtn = document.getElementById("randomBtn");
      const resultsEl = document.getElementById("results");
      const resultsCount = document.getElementById("resultsCount");
      const sortSelect = document.getElementById("sortSelect");
      const summaryMonth = document.getElementById("summaryMonth");
      const summaryCountry = document.getElementById("summaryCountry");
      const summaryExcluded = document.getElementById("summaryExcluded");
      const summaryBudget = document.getElementById("summaryBudget");
      const topSuggestion = document.getElementById("topSuggestion");

      const months = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ];

      // populate month select
      months.forEach((m, i) => {
        const opt = document.createElement("option");
        opt.value = i + 1;
        opt.textContent = m;
        monthSelect.appendChild(opt);
      });

      function parseExclusions(text) {
        if (!text) return [];
        return text
          .split(",")
          .map((s) => s.trim())
          .filter(Boolean)
          .map((s) => s.toLowerCase());
      }

      function updateSummary(filters) {
        summaryMonth.textContent = filters.month
          ? months[filters.month - 1]
          : "â€”";
        summaryCountry.textContent = filters.country || "â€”";
        summaryExcluded.textContent =
          filters.excluded && filters.excluded.length
            ? filters.excluded.join(", ")
            : "â€”";
        const hasMin =
          filters.minBudget !== null && filters.minBudget !== undefined;
        const hasMax =
          filters.maxBudget !== null && filters.maxBudget !== undefined;
        summaryBudget.textContent =
          hasMin || hasMax
            ? `${hasMin ? filters.minBudget : "â€”"} to ${
                hasMax ? filters.maxBudget : "â€”"
              } USD/day`
            : "â€”";
      }

      function applyFilters() {
        const month = monthSelect.value ? Number(monthSelect.value) : null;
        const countryQuery = countryInput.value.trim().toLowerCase();
        const excluded = parseExclusions(excludeInput.value);
        const minB = minBudget.value !== "" ? Number(minBudget.value) : null;
        const maxB = maxBudget.value !== "" ? Number(maxBudget.value) : null;

        // Auto-correct inverted ranges (e.g., min > max)
        let rangeMin = minB;
        let rangeMax = maxB;
        if (
          rangeMin !== null &&
          rangeMax !== null &&
          Number.isFinite(rangeMin) &&
          Number.isFinite(rangeMax) &&
          rangeMin > rangeMax
        ) {
          const tmp = rangeMin;
          rangeMin = rangeMax;
          rangeMax = tmp;
        }

        const filters = {
          month,
          country: countryQuery || null,
          excluded,
          minBudget: rangeMin,
          maxBudget: rangeMax,
        };
        updateSummary(filters);

        let candidates = data.slice();

        // apply country search first (if provided)
        if (filters.country) {
          candidates = candidates.filter((c) =>
            c.name.toLowerCase().includes(filters.country),
          );
        } else if (filters.month) {
          candidates = candidates.filter((c) =>
            c.bestMonths.includes(filters.month),
          );
        }

        // apply exclusions
        if (filters.excluded && filters.excluded.length) {
          candidates = candidates.filter(
            (c) => !filters.excluded.includes(c.name.toLowerCase()),
          );
        }

        // apply budget filter
        // If both min and max are set, require country's full range to lie within user range
        if (filters.minBudget !== null && filters.maxBudget !== null) {
          candidates = candidates.filter(
            (c) =>
              c.minBudget >= filters.minBudget &&
              c.maxBudget <= filters.maxBudget,
          );
        } else {
          // If only one bound is set, use inclusive comparison against that bound
          if (filters.minBudget !== null) {
            candidates = candidates.filter(
              (c) => c.maxBudget >= filters.minBudget,
            );
          }
          if (filters.maxBudget !== null) {
            candidates = candidates.filter(
              (c) => c.minBudget <= filters.maxBudget,
            );
          }
        }

        // sorting
        const sortBy = sortSelect ? sortSelect.value : "relevance";
        if (sortBy === "relevance") {
          // prefer countries where month is in bestMonths (if month provided)
          if (filters.month) {
            candidates.sort((a, b) => {
              const aScore = a.bestMonths.includes(filters.month) ? 0 : 1;
              const bScore = b.bestMonths.includes(filters.month) ? 0 : 1;
              return aScore - bScore;
            });
          }
        } else if (sortBy === "minAsc") {
          candidates.sort((a, b) => a.minBudget - b.minBudget);
        } else if (sortBy === "minDesc") {
          candidates.sort((a, b) => b.minBudget - a.minBudget);
        }

        renderResults(candidates, filters);
      }

      function renderResults(list, filters) {
        resultsEl.innerHTML = "";
        resultsCount.textContent = list.length;
        if (!list.length) {
          topSuggestion.textContent =
            "No matches found â€” try removing filters or changing month/budget.";
          resultsEl.innerHTML =
            '<div class="p-4 text-sm text-slate-600">No suggestions found.</div>';
          return;
        }

        // top suggestion
        const top = list[0];
        topSuggestion.innerHTML = `<div class=\"flex flex-col sm:flex-row items-start gap-3\">
    <div class=\"text-2xl\">${top.emoji}</div>
    <div>
      <div class=\"flex items-center gap-2\">
        <strong>${top.name}</strong>
        <span class=\"text-[10px] uppercase tracking-wide px-1.5 py-0.5 rounded bg-amber-100 text-amber-800 dark:bg-amber-300/20 dark:text-amber-200 border border-amber-200 dark:border-amber-300/30\">Top Pick</span>
      </div>
      <div class=\"text-xs text-slate-500 dark:text-slate-300 mt-1\">Budget: ${top.minBudget}-${top.maxBudget} USD/day</div>
      <div class=\"text-xs text-slate-500 dark:text-slate-300 mt-1\">${top.notes}</div>
    </div>
  </div>`;

        list.forEach((item) => {
          const card = document.createElement("div");
          card.className =
            "p-4 rounded-lg border dark:border-slate-700 hover:shadow-md hover:-translate-y-0.5 transition bg-white dark:bg-slate-800";
          const monthsChips = item.bestMonths
            .map(
              (m) =>
                `<span class=\"px-2 py-0.5 text-[11px] rounded-full bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300\">${
                  months[m - 1]
                }</span>`,
            )
            .join(" ");
          card.innerHTML = `
          <div class=\"flex flex-col sm:flex-row items-start justify-between gap-3\"> 
            <div class=\"flex items-center gap-3\"> 
              <div class=\"text-3xl\">${item.emoji}</div>
              <div>
                <div class=\"font-semibold text-lg\">${item.name}</div>
                <div class=\"flex flex-wrap gap-1 mt-1\">${monthsChips}</div>
              </div>
            </div>
            <div class=\"sm:text-right text-left w-full sm:w-auto\"> 
              <div class=\"inline-flex items-center gap-1 text-sm font-medium px-2 py-1 rounded bg-emerald-50 text-emerald-700 dark:bg-emerald-400/10 dark:text-emerald-200 border border-emerald-200 dark:border-emerald-300/30\">ðŸ’° ${item.minBudget} - ${item.maxBudget} USD/day</div>
              <div class=\"text-xs text-slate-500 dark:text-slate-300 mt-2 max-w-xs\">${item.notes}</div>
            </div>
          </div>
        `;
          resultsEl.appendChild(card);
        });
      }

      // Event bindings
      searchBtn.addEventListener("click", applyFilters);
      clearBtn.addEventListener("click", () => {
        monthSelect.value = "";
        countryInput.value = "";
        excludeInput.value = "";
        minBudget.value = "";
        maxBudget.value = "";
        updateSummary({});
        resultsEl.innerHTML = "";
        topSuggestion.textContent = "No suggestion yet.";
      });

      randomBtn.addEventListener("click", () => {
        const r = data[Math.floor(Math.random() * data.length)];
        monthSelect.value = "";
        countryInput.value = r.name;
        excludeInput.value = "";
        minBudget.value = "";
        maxBudget.value = "";
        applyFilters();
      });

      // live search on Enter in country input
      countryInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") applyFilters();
      });

      // Lightweight debounce for live updates
      let debounceTimer;
      const debounceApply = () => {
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(applyFilters, 200);
      };

      // Live filtering to match "update live" UX
      monthSelect.addEventListener("change", applyFilters);
      minBudget.addEventListener("input", debounceApply);
      maxBudget.addEventListener("input", debounceApply);
      excludeInput.addEventListener("input", debounceApply);
      countryInput.addEventListener("input", debounceApply);
      sortSelect.addEventListener("change", applyFilters);

      // Theme toggle (persisted)
      const applyTheme = (mode) => {
        const root = document.documentElement;
        if (mode === "dark") {
          root.classList.add("dark");
        } else {
          root.classList.remove("dark");
        }
      };
      const savedTheme = localStorage.getItem("theme") || "light";
      applyTheme(savedTheme);
      document.getElementById("themeToggle").addEventListener("click", () => {
        const current = document.documentElement.classList.contains("dark")
          ? "dark"
          : "light";
        const next = current === "dark" ? "light" : "dark";
        localStorage.setItem("theme", next);
        applyTheme(next);
      });

      // initial state
      updateSummary({});
    </script>
  </body>
</html>
